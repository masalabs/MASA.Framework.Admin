@page "/management-admin/dicValue-list/{id}"
@using MASA.Framework.Admin.Contracts.Dictionary.DicValue.ViewModel
@inherits ProCompontentBase

<PPageHeader Title="@T("Search")" ShowFiltersByDefault OnSearch="() => FetchList()">
    <LeftActions>
        <MButton Color="primary" OnClick="AddAsync"><MIcon Left>mdi-plus</MIcon>@T("Add")</MButton>
    </LeftActions>
    <Filters Context="filter">
        <MRow Dense>

        </MRow>
    </Filters>
</PPageHeader>

<DefaultDataTable Headers="_headers"
                  Items="_tableData"
                  Loading="_loading"
                  OnOptionsUpdate="HandleOnOptionsUpdate"
                  Page="_options.PageIndex"
                  ItemsPerPage="_options.PageSize"
                  ServerItemsLength="_totalCount"
                  TItem="DicValueViewModel">
    <ItemColContent>
        @if (context.Header.Value == "actions")
        {
            <PAction Color="primary" Label="@T("Edit")" Text OnClick="() => UpdateAsync(context.Item)" Icon="mdi-pencil"> </PAction>
            <PAction Color="error" Label="@T("Delete")" Text OnClick="() => DelAsync(context.Item)" Icon="mdi-delete"></PAction>
        }
        else
        {
            <GenericColumnRender Value="@context.Value" ChippedEnum></GenericColumnRender>
        }


    </ItemColContent>
</DefaultDataTable>

<FormModal Visible="@_dataModal.Visible" Width="600" Title="@_dialogTitle" OnCancel="() => _dataModal.Hide()" OnOk="Save" Model="_dataModal.Data">
    <MRow>
        <MCol Cols="12">
            <MTextField Label="@T("Label")"
                        Dense Outlined
                        @bind-Value="_dataModal.Data.Lable">
                <PrependInnerContent>
                    <lable class="red--text">*</lable>
                </PrependInnerContent>
            </MTextField>
        </MCol>

        <MCol Cols="12">
            <MTextField Label="@T("Value")"
                        Dense Outlined
                        @bind-Value="_dataModal.Data.Value">
                <PrependInnerContent>
                    <lable class="red--text">*</lable>
                </PrependInnerContent>
            </MTextField>
        </MCol>

        <MCol Cols="12">
            <MSwitch Label="@T("Switch")" @bind-Value="_dataModal.Data.Enable" />
        </MCol>

        <MCol Cols="12">
            <MTextField Label="@T("Describe")"
                        Dense Outlined
                        @bind-Value="_dataModal.Data.Description">
                <PrependInnerContent>
                    <lable class="red--text">*</lable>
                </PrependInnerContent>
            </MTextField>
        </MCol>

        <MCol Cols="12">
            <MTextField Label="@T("Sort")"
                        Dense Outlined
                        @bind-Value="_dataModal.Data.Sort">
                <PrependInnerContent>
                    <lable class="red--text">*</lable>
                </PrependInnerContent>
            </MTextField>
        </MCol>
    </MRow>
</FormModal>