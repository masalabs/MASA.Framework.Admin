@inherits RBACCompontentBase

<MDialog @bind-Value="Show"
         MaxWidth="290">
    <MCard>
        <MCardTitle Class="text-h5">
            @Title
        </MCardTitle>

         <MCardText>
            @Message
        </MCardText>

        <MCardActions>
            <MSpacer></MSpacer>
            @if (ConfirmMode)
            {
                <MButton
                     OnClick="async ()=> await Confirm(false)">
                    @T("Cancel")
                </MButton>
            }
            <MButton Color="primary"
                     OnClick="async ()=> await Confirm(true)">
                @T("Confirm")
            </MButton>
        </MCardActions>
    </MCard>
</MDialog>

@code {
    [Parameter]
    public bool Show { get; set; }

    [Parameter]
    public EventCallback<bool> ShowChanged { get; set; }

    [Parameter]
    public bool ConfirmMode { get; set; }

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public string? Message { get; set; }

    [Parameter]
    public EventCallback<bool> WhenConfirm { get; set; }

    async Task Confirm(bool confirm)
    {
        if (WhenConfirm.HasDelegate)
        {
            await WhenConfirm.InvokeAsync(confirm);
        }
        if (ShowChanged.HasDelegate)
        {
            await ShowChanged.InvokeAsync(false);
        }
        else Show = false;
    }
}
